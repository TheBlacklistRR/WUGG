<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>El Rebaño Blacklist</title>
<link rel="icon" type="image/png" href="https://github.com/IsabelGulloso/BlackList/blob/main/BLACKLIST/Select%20Menu/Logo/Logo%2064%C3%9764.png?raw=true">
  <style>

body {
  margin: 0;
  overflow: hidden;
}

#perfil {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  border: none;
  display: none;
  z-index: 5;
  background: transparent;
}

    /* Fondos */
    #fondoCategoria, .slotImg {
      position: absolute;
      top: 0; left: 0;
      width: 100%;
      height: 100%;
      object-fit: cover;
      z-index: 32;
      pointer-events: none;
    }
    #fondoSlot {
      position: absolute;
      top: 0; left: 0;
      width: 100%;
      height: 100%;
      object-fit: cover;
      z-index: 33;
      display: none;
      pointer-events: none;
    }

    /* Zonas Clickeables */
    .slot, #switcher {
      position: absolute;
      cursor: pointer;
      z-index: 30;
    }

    /* Ajustes de posición de las imágenes normales */
    #slot1Img { transform: translateY(0%); }
    #slot2Img { transform: translateY(14.5%); }
    #slot3Img { transform: translateY(28.8%); }
    #slot4Img { transform: translateY(43.1%); }
    #slot5Img { transform: translateY(57%); }

    /* Sirenas */
    .sirena {
      position: absolute;
      top: 0; left: 0;
      width: 100%; height: 100%;
      opacity: 0;
      pointer-events: none;
      z-index: 2;
      transition: opacity 0.8s ease;
    }

    /* PNGs de Slots Activos */
    #slotActivos {
      position: absolute;
      top: 0; left: 0;
      width: 100%;
      height: 100%;
      z-index: 31;
      pointer-events: none;
    }

    .slotActivo {
      position: absolute;
      top: 0; left: 0;
      width: 100%; height: 100%;
      object-fit: cover;
      display: none;
    }

    /* Debug */
    body.debug .slot { background: rgba(255,0,0,0.3); }
    body.debug #switcher { background: rgba(0,255,0,0.3); }

    /* Fondo Base Imagen */
    #fondoImagen {
      position: fixed;
      top: 0; left: 0;
      width: 100%;
      height: 100%;
      object-fit: cover;
      z-index: 0;
    }

    /* Fondo en Video */
    #videoFondo {
      position: fixed;
      top: 0; left: 0;
      width: 100%;
      height: 100%;
      object-fit: cover;
      z-index: 1;
      opacity: 0;
      transition: opacity 5s ease-in-out;
    }

    #decorativo {
      position: absolute;
      top: 0; 
      left: 0;
      width: 100%;
      height: 100%;
      object-fit: cover;
      z-index: 11;
      pointer-events: none;
    }

    /* Pantalla de Bienvenida */
    #bienvenida {
      position: absolute;
      top: 0; left: 0;
      width: 100%;
      height: 100%;
      object-fit: cover;
      z-index: 999;
      transition: opacity 1s ease;
    }

    /* Imagen HOME Hover */
    .overlay-hover {
      position: absolute;
      top: 0; 
      left: 0;
      width: 100%;
      height: 100%;
      object-fit: contain;
      z-index: 39;
      transition: opacity 0.3s ease-in-out;
      pointer-events: none;
    }

    /* HOME Icon Zona Clickeable */
    .overlay-zona {
      position: absolute;
      top: 2%;    
      left: 94%;  
      width: 5%;  
      height: 9%; 
      cursor: pointer;
      z-index: 800;
      background: rgba(0, 0, 0, 0);
    }

#vehicleIcon {
  position: absolute;
  top: 0%;    
  left: 0%;
  width: 100%;
  height: 100%;
  object-fit: contain;
  z-index: 39;
  pointer-events: none;
  transition: opacity 0.25s;
}

#vehicleHoverZona {
  position: absolute;
  top: 2%;
  left: 87%;
  width: 7%;
  height: 11%;
  z-index: 800;
  background: rgba(0,0,0,0);
  cursor: default;
  pointer-events: none;
}

/* VEHICLE Icon Imagen */
.overlay-hover-vehicle {
  position: absolute;
  top: 0; 
  left: 0;
  width: 100%;
  height: 100%;
  object-fit: contain;
  z-index: 39;
  transition: opacity 0.3s ease-in-out;
  pointer-events: none;
}

#overlayBienvenida {
  position: absolute;
  top: 85.5%;
  left: 43.8%;
  width: 12.9%;
  height: 8%;
  z-index: 1000;
  cursor: pointer;
  background: rgba(0, 255, 0, 0);
}

body.debug #overlayBienvenida {
  background: rgba(0, 255, 0, 0.3);
  outline: 2px dashed lime;
}

    /* Loader */
    #loader {
      position: fixed;
      top: 0; left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0,0,0,0.7);
      display: none;
      align-items: center;
      justify-content: center;
      z-index: 10000;
    }

    #loader img {
      width: 100%;
      height: 100%;
    }

  </style>
</head>
<body>

  <!-- Pantalla de Bienvenida -->
  <img id="bienvenida" src="https://github.com/IsabelGulloso/BlackList/blob/main/HDIntro.png?raw=true">
  <div id="overlayBienvenida"></div>

  <!-- Fondo Base -->
  <img id="fondoImagen" src="https://github.com/IsabelGulloso/BlackList/blob/main/HDMap.png?raw=true">

  <!-- Fondo en Video -->
  <video id="videoFondo" autoplay muted loop playsinline>
    <source src="SinLinkDeVideoAsignado" type="video/mp4">
  </video>

  <!-- HOME Icon -->
  <img src="https://github.com/IsabelGulloso/BlackList/blob/main/BLACKLIST/Select%20Menu/Home%20Icon%2001.png?raw=true" class="overlay-hover" data-hover="https://github.com/IsabelGulloso/BlackList/blob/main/BLACKLIST/Select%20Menu/Home%20Icon%2002.png?raw=true">

<!-- VEHICLE Icon -->
<img id="vehicleIcon"
     src="https://raw.githubusercontent.com/IsabelGulloso/BlackList/refs/heads/main/BLACKLIST/Racers/Menu/Vehicle%20Icon%2001.png"
     data-hover="https://github.com/IsabelGulloso/BlackList/blob/main/BLACKLIST/Racers/Menu/Vehicle%20Icon%2002.png?raw=true">

<!-- Zona Fantasma Hover -->
<div id="vehicleHoverZona"></div>

  <!-- HOME Menu Clickeable -->
  <div class="overlay-zona" onclick="window.open('https://github.com/IsabelGulloso/BlackList/blob/main/BLACKLIST/Racers/TEST/TestImage.png?raw=true','_blank')"></div>

  <!-- Música de Fondo -->
  <audio id="bgmusic" loop>
    <source src="https://github.com/IsabelGulloso/BlackList/raw/refs/heads/main/BLACKLIST/Music/Main%20Menu/MAIN%20MENU.mp3" type="audio/mpeg">
  </audio>

  <!-- Fondos -->
  <img id="fondoCategoria" src="cat1_01.png">
  <img id="fondoSlot" src="">

  <!-- Imágenes Base de Slots -->
  <img id="slot1Img" class="slotImg">
  <img id="slot2Img" class="slotImg">
  <img id="slot3Img" class="slotImg">
  <img id="slot4Img" class="slotImg">
  <img id="slot5Img" class="slotImg">

  <!-- Sirenas -->
  <img id="sirenaRoja" class="sirena" src="https://github.com/IsabelGulloso/BlackList/blob/main/RED%20LIGHT%20TEST%20V2.png?raw=true">
  <img id="sirenaAzul" class="sirena" src="https://github.com/IsabelGulloso/BlackList/blob/main/BLUE%20LIGHT%20TEST%20V2.png?raw=true">

  <!-- HUD Icons Menu de Seleccion -->
  <img id="decorativo" src="https://raw.githubusercontent.com/TheBlacklistRR/WUGG/refs/heads/main/Menu/Select%20Menu/HD%20Menu%20HUD.png">

  <!-- Imágenes de Slot Activas -->
  <div id="slotActivos">
    <img id="slotActivo1" class="slotActivo" src="https://github.com/IsabelGulloso/BlackList/blob/main/BLACKLIST/Select%20Menu/Blacklist%20Puesto%2001.png?raw=true">
    <img id="slotActivo2" class="slotActivo" src="https://github.com/IsabelGulloso/BlackList/blob/main/BLACKLIST/Select%20Menu/Blacklist%20Puesto%2002.png?raw=true">
    <img id="slotActivo3" class="slotActivo" src="https://github.com/IsabelGulloso/BlackList/blob/main/BLACKLIST/Select%20Menu/Blacklist%20Puesto%2003.png?raw=true">
    <img id="slotActivo4" class="slotActivo" src="https://github.com/IsabelGulloso/BlackList/blob/main/BLACKLIST/Select%20Menu/Blacklist%20Puesto%2004.png?raw=true">
    <img id="slotActivo5" class="slotActivo" src="https://github.com/IsabelGulloso/BlackList/blob/main/BLACKLIST/Select%20Menu/Blacklist%20Puesto%2005.png?raw=true">
    <img id="slotActivo6" class="slotActivo" src="https://github.com/IsabelGulloso/BlackList/blob/main/BLACKLIST/Select%20Menu/Blacklist%20Puesto%2006.png?raw=true">
    <img id="slotActivo7" class="slotActivo" src="https://github.com/IsabelGulloso/BlackList/blob/main/BLACKLIST/Select%20Menu/Blacklist%20Puesto%2007.png?raw=true">
    <img id="slotActivo8" class="slotActivo" src="https://github.com/IsabelGulloso/BlackList/blob/main/BLACKLIST/Select%20Menu/Blacklist%20Puesto%2008.png?raw=true">
    <img id="slotActivo9" class="slotActivo" src="https://github.com/IsabelGulloso/BlackList/blob/main/BLACKLIST/Select%20Menu/Blacklist%20Puesto%2009.png?raw=true">
    <img id="slotActivo10" class="slotActivo" src="https://github.com/IsabelGulloso/BlackList/blob/main/BLACKLIST/Select%20Menu/Blacklist%20Puesto%2010.png?raw=true">
    <img id="slotActivo11" class="slotActivo" src="https://github.com/IsabelGulloso/BlackList/blob/main/BLACKLIST/Select%20Menu/Blacklist%20Puesto%2011.png?raw=true">
    <img id="slotActivo12" class="slotActivo" src="https://github.com/IsabelGulloso/BlackList/blob/main/BLACKLIST/Select%20Menu/Blacklist%20Puesto%2012.png?raw=true">
    <img id="slotActivo13" class="slotActivo" src="https://github.com/IsabelGulloso/BlackList/blob/main/BLACKLIST/Select%20Menu/Blacklist%20Puesto%2013.png?raw=true">
    <img id="slotActivo14" class="slotActivo" src="https://github.com/IsabelGulloso/BlackList/blob/main/BLACKLIST/Select%20Menu/Blacklist%20Puesto%2014.png?raw=true">
    <img id="slotActivo15" class="slotActivo" src="https://github.com/IsabelGulloso/BlackList/blob/main/BLACKLIST/Select%20Menu/Blacklist%20Puesto%2015.png?raw=true">
  </div>

  <!-- Botón categorías -->
  <div id="switcher" style="top:0%; left:74%; transform:translateX(-50%); width:17%; height:9%;"></div>

  <!-- Slots -->
  <div id="slot1" class="slot" style="top:28.8%; left:0%; transform:translateX(-50%); width:25%; height:14.5%;"></div>
  <div id="slot2" class="slot" style="top:43.3%; left:0%; transform:translateX(-50%); width:25%; height:14.5%;"></div>
  <div id="slot3" class="slot" style="top:57.5%; left:0%; transform:translateX(-50%); width:25%; height:14.5%;"></div>
  <div id="slot4" class="slot" style="top:72.0%; left:0%; transform:translateX(-50%); width:25%; height:14.5%;"></div>
  <div id="slot5" class="slot" style="top:86.5%; left:0%; transform:translateX(-50%); width:25%; height:14.5%;"></div>

  <!-- Contenedor de perfil -->
  <iframe id="perfil" allowtransparency="true"></iframe>

  <!-- Loader -->
  <div id="loader">
    <img src="https://github.com/IsabelGulloso/BlackList/blob/main/BLACKLIST/Select%20Menu/Cargando.webp?raw=true" alt="Cargando..." />
  </div>

  <script>
    const switcherImgs = [
      {normal:"https://github.com/IsabelGulloso/BlackList/blob/main/Test%20Imagen%20Fase%20Burnout%2001.png?raw=true", hover:"https://github.com/IsabelGulloso/BlackList/blob/main/Test%20Imagen%20Fase%20Burnout%2002.png?raw=true"},
      {normal:"https://github.com/IsabelGulloso/BlackList/blob/main/Test%20Imagen%20Fase%20Casual%2001.png?raw=true", hover:"https://github.com/IsabelGulloso/BlackList/blob/main/Test%20Imagen%20Fase%20Casual%2002.png?raw=true"},
      {normal:"https://github.com/IsabelGulloso/BlackList/blob/main/Test%20Imagen%20Fase%20Cruise%2001.png?raw=true", hover:"https://github.com/IsabelGulloso/BlackList/blob/main/Test%20Imagen%20Fase%20Cruise%2002.png?raw=true"}
    ];

    const categorias = [
      [
    // Blacklist 01
        {normal:"https://github.com/IsabelGulloso/BlackList/blob/main/B1%20BMW%20BANDW.png?raw=true", 
         hover:"https://github.com/IsabelGulloso/BlackList/blob/main/B1%20BMW%20BACK.png?raw=true", 
         activo:"https://github.com/IsabelGulloso/BlackList/blob/main/B1%20BMW%20M3%20FRONT.png?raw=true",
         perfil:"https://theblacklistrr.github.io/WUGG/Racers/DYNAMIC.html"},
    // Blacklist 02
        {normal:"https://github.com/IsabelGulloso/BlackList/blob/main/B2%20BULL%2002.png?raw=true", 
         hover:"https://github.com/IsabelGulloso/BlackList/blob/main/B2%20BULL%2001.png?raw=true", 
         activo:"https://github.com/IsabelGulloso/BlackList/blob/main/B1%20BMW%20M3%20FRONT.png?raw=true", 
         perfil:"https://theblacklistrr.github.io/WUGG/Racers/SAMHARPER.html"},
    // Blacklist 03
        {normal:"https://github.com/IsabelGulloso/BlackList/blob/main/B3%20RONNIE%2002.png?raw=true", 
         hover:"https://github.com/IsabelGulloso/BlackList/blob/main/B3%20RONNIE%2001.png?raw=true", 
         activo:"https://github.com/IsabelGulloso/BlackList/blob/main/B1%20BMW%20M3%20FRONT.png?raw=true", 
         perfil:"https://theblacklistrr.github.io/WUGG/Racers/OSO.html"},
    // Blacklist 04
        {normal:"https://github.com/IsabelGulloso/BlackList/blob/main/B4%20JV%2002.png?raw=true", 
         hover:"https://github.com/IsabelGulloso/BlackList/blob/main/B4%20JV%2001.png?raw=true", 
         activo:"https://github.com/IsabelGulloso/BlackList/blob/main/B1%20BMW%20M3%20FRONT.png?raw=true", 
         perfil:"https://theblacklistrr.github.io/WUGG/Racers/NEOVAGT.html"},
    // Blacklist 05
        {normal:"https://github.com/IsabelGulloso/BlackList/blob/main/B14%20TAZ%2002.png?raw=true", 
         hover:"https://github.com/IsabelGulloso/BlackList/blob/main/B14%20TAZ%2001.png?raw=true", 
         activo:"https://github.com/IsabelGulloso/BlackList/blob/main/B1%20BMW%20M3%20FRONT.png?raw=true", 
         perfil:"https://theblacklistrr.github.io/WUGG/Racers/AZZY.html"}
      ],
      [
    // Blacklist 06
        {normal:"https://github.com/IsabelGulloso/BlackList/blob/main/B6%20MING%2002.png?raw=true", 
         hover:"https://github.com/IsabelGulloso/BlackList/blob/main/B6%20MING%2001.png?raw=true", 
         activo:"https://github.com/IsabelGulloso/BlackList/blob/main/B1%20BMW%20M3%20FRONT.png?raw=true", 
         perfil:"https://theblacklistrr.github.io/WUGG/Racers/PINACOLADA.html"},
    // Blacklist 07
        {normal:"https://github.com/IsabelGulloso/BlackList/blob/main/B7%20KAZE%2002.png?raw=true", 
         hover:"https://github.com/IsabelGulloso/BlackList/blob/main/B7%20KAZE%2001.png?raw=true", 
         activo:"https://github.com/IsabelGulloso/BlackList/blob/main/B1%20BMW%20M3%20FRONT.png?raw=true", 
         perfil:"https://theblacklistrr.github.io/WUGG/Racers/MARIOVUKOVIC.html"},
    // Blacklist 08
        {normal:"https://github.com/IsabelGulloso/BlackList/blob/main/B8%20JEWELS%2002.png?raw=true", 
         hover:"https://github.com/IsabelGulloso/BlackList/blob/main/B7%20JEWELS%2001.png?raw=true", 
         activo:"https://github.com/IsabelGulloso/BlackList/blob/main/B1%20BMW%20M3%20FRONT.png?raw=true", 
         perfil:"https://theblacklistrr.github.io/WUGG/Racers/ANGELASAFIRO.html"},
    // Blacklist 09
        {normal:"https://github.com/IsabelGulloso/BlackList/blob/main/B9%20EARL%2002.png?raw=true", 
         hover:"https://github.com/IsabelGulloso/BlackList/blob/main/B9%20EARL%2001.png?raw=true", 
         activo:"https://github.com/IsabelGulloso/BlackList/blob/main/B1%20BMW%20M3%20FRONT.png?raw=true", 
         perfil:"https://theblacklistrr.github.io/WUGG/Racers/EDJAPRINCESS.html"},
    // Blacklist 10
        {normal:"https://github.com/IsabelGulloso/BlackList/blob/main/B10%20BARON%2002.png?raw=true", 
         hover:"https://github.com/IsabelGulloso/BlackList/blob/main/B10%20BARON%2001.png?raw=true", 
         activo:"https://github.com/IsabelGulloso/BlackList/blob/main/B1%20BMW%20M3%20FRONT.png?raw=true", 
         perfil:"https://theblacklistrr.github.io/WUGG/Racers/010.html"}
      ],
      [
    // Blacklist 11
        {normal:"https://github.com/IsabelGulloso/BlackList/blob/main/B11%20BIG%20LOU%2002.png?raw=true", 
         hover:"https://github.com/IsabelGulloso/BlackList/blob/main/B11%20BIG%20LOU%2001.png?raw=true", 
         activo:"https://github.com/IsabelGulloso/BlackList/blob/main/B1%20BMW%20M3%20FRONT.png?raw=true", 
         perfil:"https://theblacklistrr.github.io/WUGG/Racers/011.html"},
    // Blacklist 12
        {normal:"https://github.com/IsabelGulloso/BlackList/blob/main/B12%20IZZY%2002.png?raw=true", 
         hover:"https://github.com/IsabelGulloso/BlackList/blob/main/B12%20IZZY%2001.png?raw=true", 
         activo:"https://github.com/IsabelGulloso/BlackList/blob/main/B1%20BMW%20M3%20FRONT.png?raw=true", 
         perfil:"https://theblacklistrr.github.io/WUGG/Racers/012.html"},
    // Blacklist 13
        {normal:"https://github.com/IsabelGulloso/BlackList/blob/main/B13%20VIC%2002.png?raw=true", 
         hover:"https://github.com/IsabelGulloso/BlackList/blob/main/B13%20VIC%2001.png?raw=true", 
         activo:"https://github.com/IsabelGulloso/BlackList/blob/main/B1%20BMW%20M3%20FRONT.png?raw=true", 
         perfil:"https://theblacklistrr.github.io/WUGG/Racers/013.html"},
    // Blacklist 14
        {normal:"https://github.com/IsabelGulloso/BlackList/blob/main/B14%20TAZ%2002.png?raw=true", 
         hover:"https://github.com/IsabelGulloso/BlackList/blob/main/B14%20TAZ%2001.png?raw=true", 
         activo:"https://github.com/IsabelGulloso/BlackList/blob/main/B1%20BMW%20M3%20FRONT.png?raw=true", 
         perfil:"https://theblacklistrr.github.io/WUGG/Racers/014.html"},
    // Blacklist 15
        {normal:"https://github.com/IsabelGulloso/BlackList/blob/main/B15%20SONNY%2002.png?raw=true", 
         hover:"https://github.com/IsabelGulloso/BlackList/blob/main/B15%20SONNY%2001.png?raw=true", 
         activo:"https://github.com/IsabelGulloso/BlackList/blob/main/B1%20BMW%20M3%20FRONT.png?raw=true", 
         perfil:"https://theblacklistrr.github.io/WUGG/Racers/015.html"}
      ]
    ];

    const fondoCategoria = document.getElementById("fondoCategoria");
    const fondoSlot = document.getElementById("fondoSlot");
    const sw = document.getElementById("switcher");
    let categoriaActual = 0;

    cargarCategoria(categoriaActual);

    function cargarCategoria(catIndex) {
      const slots = categorias[catIndex];

      fondoCategoria.src = switcherImgs[catIndex].normal;
      sw.onmouseover = () => fondoCategoria.src = switcherImgs[catIndex].hover;
      sw.onmouseout  = () => fondoCategoria.src = switcherImgs[catIndex].normal;

      for (let i = 0; i < 5; i++) {
        document.getElementById("slot"+(i+1)+"Img").src = slots[i].normal;
        const slot = document.getElementById("slot"+(i+1));

        if (slots[i].activoFlag) {
          slot.dataset.activo = "true";
          fondoSlot.style.display = "block";
          fondoSlot.src = slots[i].activo;
        } else {
          slot.dataset.activo = "false";
        }

        slot.onmouseover = () => {
          if(slot.dataset.activo!=="true"){
            fondoSlot.style.display = "none";
            fondoSlot.src = "";

            setTimeout(() => {
              fondoSlot.style.display = "block";
              fondoSlot.src = slots[i].hover;

              switch(i){
                case 0: fondoSlot.style.transform = "translateY(0%)"; break;
                case 1: fondoSlot.style.transform = "translateY(14.5%)"; break;
                case 2: fondoSlot.style.transform = "translateY(28.8%)"; break;
                case 3: fondoSlot.style.transform = "translateY(43.1%)"; break;
                case 4: fondoSlot.style.transform = "translateY(57%)"; break;
              }
            }, 30);
          }
        };

        slot.onmouseout = () => {
          if(slot.dataset.activo!=="true"){
            fondoSlot.style.transform = "";
            fondoSlot.style.display = "none";
          }
        };

        slot.onmouseleave = () => {
          if(slot.dataset.activo!=="true"){
            fondoSlot.src = "";
            fondoSlot.style.display = "none";
            fondoSlot.style.transform = "";
          }
        };

        slot.onclick = () => {
          slots.forEach(s => s.activoFlag = false);
          document.querySelectorAll(".slot").forEach((s,j) => {
            s.dataset.activo = "false";
            document.getElementById("slot"+(j+1)+"Img").src = categorias[categoriaActual][j].normal;
          });

          slots[i].activoFlag = true;
          slot.dataset.activo = "true";
          document.getElementById("slot"+(i+1)+"Img").src = slots[i].activo;

          fondoSlot.style.display = "none";
          fondoSlot.src = "";

          switch(i){
            case 0: fondoSlot.style.transform = "translateY(0%)"; break;
            case 1: fondoSlot.style.transform = "translateY(14.5%)"; break;
            case 2: fondoSlot.style.transform = "translateY(28.8%)"; break;
            case 3: fondoSlot.style.transform = "translateY(43.1%)"; break;
            case 4: fondoSlot.style.transform = "translateY(57%)"; break;
          }
cargarPerfil(slots[i].perfil);

          document.querySelectorAll(".slotActivo").forEach(img => img.style.display = "none");
          let slotNum = categoriaActual * 5 + (i + 1);
          document.getElementById("slotActivo" + slotNum).style.display = "block";
        };
      }
    }

    sw.onclick = () => {
      categoriaActual = (categoriaActual+1)%3;
      cargarCategoria(categoriaActual);
      fondoSlot.style.display="none";
    };

    document.addEventListener("keydown", e => {
      if(e.key.toLowerCase()==="LetraSinAsignar"){
        document.body.classList.toggle("debug");
      }
    });

    /* Sirenas */
    const tiempoEncendido = 600;
    const tiempoEntreCiclos = 4000;
    const velocidadFade = 800;

    document.querySelectorAll('.sirena').forEach(s => {
      s.style.transition = `opacity ${velocidadFade}ms ease`;
    });

    const sirenaRoja = document.getElementById("sirenaRoja");
    const sirenaAzul = document.getElementById("sirenaAzul");

    function activarSirenas() {
      sirenaRoja.style.opacity = 1;
      setTimeout(() => {
        sirenaRoja.style.opacity = 0;
        sirenaAzul.style.opacity = 1;
        setTimeout(() => {
          sirenaAzul.style.opacity = 0;
        }, tiempoEncendido);
      }, tiempoEncendido);
    }
    setInterval(activarSirenas, tiempoEntreCiclos);

    /* Bienvenida y Música */
    const bienvenida = document.getElementById("bienvenida");
    const overlayBienvenida = document.getElementById("overlayBienvenida");
    const bgmusic = document.getElementById("bgmusic");

    overlayBienvenida.addEventListener("click", () => {
      bgmusic.play();
      bienvenida.style.opacity = "0";
      overlayBienvenida.style.opacity = "0";

      setTimeout(() => {
        bienvenida.style.display = "none";
        overlayBienvenida.style.display = "none";
      }, 1000);
    });

/* Imagen Hover */
document.addEventListener("DOMContentLoaded", () => {
  const overlay = document.querySelector(".overlay-hover");
  const zona = document.querySelector(".overlay-zona");
  if (!overlay || !zona) return;

  const normalSrc = overlay.getAttribute("src");
  const hoverSrc = overlay.getAttribute("data-hover");

  zona.addEventListener("mouseenter", () => {
    overlay.src = hoverSrc;
  });

  zona.addEventListener("mouseleave", () => {
    overlay.src = normalSrc;
  });
});

    /* Video de fondo */
    let fondoVideoActivo = 0;
    const fadeInSegundos = 5;
    const videoFondo = document.getElementById("videoFondo");

    if (fondoVideoActivo === 1) {
      videoFondo.style.transition = `opacity ${fadeInSegundos}s ease-in-out`;
      videoFondo.addEventListener("loadeddata", () => {
        setTimeout(() => {
          videoFondo.style.opacity = "1";
        }, 100);
      });
    } else {
      videoFondo.style.display = "none";
    }

let visor = document.getElementById("perfil");
let cargaId = 0;

// URLs de los 15 Perfiles (ajusta si cambian nombres)
const urlsPerfiles = [
  "https://theblacklistrr.github.io/WUGG/Racers/DYNAMIC.html",
  "https://theblacklistrr.github.io/WUGG/Racers/SAMHARPER.html",
  "https://theblacklistrr.github.io/WUGG/Racers/OSO.html",
  "https://theblacklistrr.github.io/WUGG/Racers/NEOVAGT.html",
  "https://theblacklistrr.github.io/WUGG/Racers/AZZY.html",
  "https://theblacklistrr.github.io/WUGG/Racers/PINACOLADA.html",
  "https://theblacklistrr.github.io/WUGG/Racers/MARIOVUKOVIC.html",
  "https://theblacklistrr.github.io/WUGG/Racers/ANGELASAFIRO.html",
  "https://theblacklistrr.github.io/WUGG/Racers/EDJAPRINCESS.html",
  "https://theblacklistrr.github.io/WUGG/Racers/010.html",
  "https://theblacklistrr.github.io/WUGG/Racers/011.html",
  "https://theblacklistrr.github.io/WUGG/Racers/012.html",
  "https://theblacklistrr.github.io/WUGG/Racers/013.html",
  "https://theblacklistrr.github.io/WUGG/Racers/014.html",
  "https://theblacklistrr.github.io/WUGG/Racers/015.html"
];

const precargados = new Map();

const noCacheURL = url => `${url}?v=${Date.now()}`;

async function precargarPerfiles() {
  const recursos = [];

  // 15 Perfiles
  for (const url of urlsPerfiles) {
    try {
      // El HTML NO lo Ejecutamos
      const res = await fetch(url, { cache: "reload" });
      const html = await res.text();

      // Extraemos Todos los Enlaces (src="...") Dentro del HTML
      const matches = [...html.matchAll(/src="([^"]+\.(?:png|jpg|jpeg|gif|webp|mp4))"/gi)];

      for (const m of matches) {
        const imgUrl = m[1];
        if (!recursos.includes(imgUrl)) recursos.push(imgUrl);
      }

    } catch (err) {
      console.warn("Error al precargar", url, err);
    }
  }

  console.log("Recursos Detectados:", recursos.length);

  // Carga en Caché
  for (const src of recursos) {
    const img = new Image();
    img.src = src;
  }

  console.log("Precargados en Memoria (15 Blacklist)");
}

window.addEventListener("load", () => {
  setTimeout(precargarPerfiles, 2000);
});

function cargarPerfil(url) {
  cargaId++;
  const esteId = cargaId;

  document.getElementById("loader").style.display = "flex";
  visor.style.display = "none";

  const nuevo = document.createElement("iframe");
  nuevo.allow = "autoplay";
  nuevo.allowTransparency = true;
  nuevo.src = noCacheURL(url); // siempre versión fresca
  nuevo.style.position = "absolute";
  nuevo.style.top = "0";
  nuevo.style.left = "0";
  nuevo.style.width = "100%";
  nuevo.style.height = "100%";
  nuevo.style.border = "none";
  nuevo.style.display = "none";
  nuevo.zIndex = "5";

  document.body.appendChild(nuevo);

  nuevo.onload = () => {
    if (esteId !== cargaId) return;
    setTimeout(() => {
      document.getElementById("loader").style.display = "none";
      visor.remove();
      nuevo.style.display = "block";
      nuevo.id = "perfil";
      visor = nuevo;
    }, 300);
  };
}

document.addEventListener("DOMContentLoaded", () => {
  const img = document.querySelector("#vehicleIcon");
  if (!img) return;

  const normalSrc = img.getAttribute("src");
  const hoverSrc  = img.getAttribute("data-hover");

  let isHovering = false;

  function setHover(on) {
    if (on && !isHovering) {
      img.src = hoverSrc;
      isHovering = true;
    } else if (!on && isHovering) {
      img.src = normalSrc;
      isHovering = false;
    }
  }

  function updateHoverFromCoords(clientX, clientY) {
    const x = clientX / window.innerWidth;
    const y = clientY / window.innerHeight;
    const inside = (x >= 0.886 && x <= 0.946 && y >= 0.01 && y <= 0.12);
    setHover(inside);
  }

  document.addEventListener("mousemove", (e) => {
    updateHoverFromCoords(e.clientX, e.clientY);
  });

  document.addEventListener("pointerover", (e) => {
    if (e.target && e.target.tagName === "IFRAME") {
      setHover(false);
    }
  });

  document.addEventListener("mouseout", (e) => {
    if (!e.relatedTarget) { // el cursor salió de la ventana
      setHover(false);
    }
  });

  window.addEventListener("blur", () => {
    setHover(false);
  });

  document.addEventListener("focusin", (e) => {
    if (e.target && e.target.tagName === "IFRAME") setHover(false);
  });
});

  </script>
</body>
</html>
